using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Console = Colorful.Console;

namespace Activity
{
    class Login_register
    {
        static bool isLoggedIn = false;  
        static string currentUser = "";
        public static void Register()
        {


            if (!isLoggedIn)
            {
                string RegisterTitle = @"
                            ▐▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▌
                            ▐                                                                     ▌
                            ▐                                                                     ▌
                            ▐    ██████╗ ███████╗ ██████╗ ██╗███████╗████████╗███████╗██████╗     ▌
                            ▐    ██╔══██╗██╔════╝██╔════╝ ██║██╔════╝╚══██╔══╝██╔════╝██╔══██╗    ▌
                            ▐    ██████╔╝█████╗  ██║  ███╗██║███████╗   ██║   █████╗  ██████╔╝    ▌
                            ▐    ██╔══██╗██╔══╝  ██║   ██║██║╚════██║   ██║   ██╔══╝  ██╔══██╗    ▌
                            ▐    ██║  ██║███████╗╚██████╔╝██║███████║   ██║   ███████╗██║  ██║    ▌
                            ▐    ╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝    ▌
                            ▐                                                                     ▌
                            ▐                                                                     ▌
                            ▐▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▌";

                Console.WriteLine(RegisterTitle, Color.Lavender);
                Console.Write("Enter username: ");
                string username = Console.ReadLine();
                Console.Write("Enter password: ");
                string password = Console.ReadLine();
                Connection conn = new Connection();
                if (conn.UserExists(username))
                {

                    Console.WriteLine("Username already exists. Please choose a different one.");
                    return;
                }
                else
                {
                    conn.InsertData(username, password);
                }

            }
            else
            {
                Console.WriteLine(@"
                ▐▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▌
                ▐                                                                              ▌
                ▐                                                                              ▌
                ▐     ██╗   ██╗ ██████╗ ██╗   ██╗    ███╗   ███╗██╗   ██╗███████╗████████╗     ▌
                ▐     ╚██╗ ██╔╝██╔═══██╗██║   ██║    ████╗ ████║██║   ██║██╔════╝╚══██╔══╝     ▌
                ▐      ╚████╔╝ ██║   ██║██║   ██║    ██╔████╔██║██║   ██║███████╗   ██║        ▌
                ▐       ╚██╔╝  ██║   ██║██║   ██║    ██║╚██╔╝██║██║   ██║╚════██║   ██║        ▌
                ▐        ██║   ╚██████╔╝╚██████╔╝    ██║ ╚═╝ ██║╚██████╔╝███████║   ██║        ▌
                ▐        ╚═╝    ╚═════╝  ╚═════╝     ╚═╝     ╚═╝ ╚═════╝ ╚══════╝   ╚═╝        ▌
                ▐                                                                              ▌
                ▐     ██╗      ██████╗  ██████╗  ██████╗ ██╗   ██╗████████╗                    ▌
                ▐     ██║     ██╔═══██╗██╔════╝ ██╔═══██╗██║   ██║╚══██╔══╝                    ▌
                ▐     ██║     ██║   ██║██║  ███╗██║   ██║██║   ██║   ██║                       ▌
                ▐     ██║     ██║   ██║██║   ██║██║   ██║██║   ██║   ██║                       ▌
                ▐     ███████╗╚██████╔╝╚██████╔╝╚██████╔╝╚██████╔╝   ██║                       ▌
                ▐     ╚══════╝ ╚═════╝  ╚═════╝  ╚═════╝  ╚═════╝    ╚═╝                       ▌
                ▐                                                                              ▌
                ▐     ███████╗██╗██████╗ ███████╗████████╗                                     ▌
                ▐     ██╔════╝██║██╔══██╗██╔════╝╚══██╔══╝                                     ▌
                ▐     █████╗  ██║██████╔╝███████╗   ██║                                        ▌
                ▐     ██╔══╝  ██║██╔══██╗╚════██║   ██║                                        ▌
                ▐     ██║     ██║██║  ██║███████║   ██║                                        ▌
                ▐     ╚═╝     ╚═╝╚═╝  ╚═╝╚══════╝   ╚═╝                                        ▌
                ▐                                                                              ▌
                ▐                                                                              ▌
                ▐▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▌");
            }

        }

        public static void Login()
        {
            if (!isLoggedIn)
            {
                string logintitle = @"       
                    ▐▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▌
                    ▐                                                 ▌
                    ▐                                                 ▌
                    ▐     ██╗      ██████╗  ██████╗ ██╗███╗   ██╗     ▌
                    ▐     ██║     ██╔═══██╗██╔════╝ ██║████╗  ██║     ▌
                    ▐     ██║     ██║   ██║██║  ███╗██║██╔██╗ ██║     ▌
                    ▐     ██║     ██║   ██║██║   ██║██║██║╚██╗██║     ▌
                    ▐     ███████╗╚██████╔╝╚██████╔╝██║██║ ╚████║     ▌
                    ▐     ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝╚═╝  ╚═══╝     ▌
                    ▐                                                 ▌
                    ▐                                                 ▌
                    ▐▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▌";
                Console.WriteLine(logintitle, Color.Lavender);

                Console.Write("Enter username: ");
                string username = Console.ReadLine();
                Console.Write("Enter password: ");
                string password = Console.ReadLine();

                Connection conn = new Connection();
                bool isValid = conn.ValidateLogin(username, password);

                if (isValid)
                {
                    Console.WriteLine("Login successful!");
                    isLoggedIn = true;
                    currentUser = username;
                }
                else
                {
                    Console.WriteLine("Invalid username or password.");
                }

            }
            else
            {
                Console.WriteLine(@"                
                ▐▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▌
                ▐                                                                              ▌
                ▐                                                                              ▌
                ▐     ██╗   ██╗ ██████╗ ██╗   ██╗    ███╗   ███╗██╗   ██╗███████╗████████╗     ▌
                ▐     ╚██╗ ██╔╝██╔═══██╗██║   ██║    ████╗ ████║██║   ██║██╔════╝╚══██╔══╝     ▌
                ▐      ╚████╔╝ ██║   ██║██║   ██║    ██╔████╔██║██║   ██║███████╗   ██║        ▌
                ▐       ╚██╔╝  ██║   ██║██║   ██║    ██║╚██╔╝██║██║   ██║╚════██║   ██║        ▌
                ▐        ██║   ╚██████╔╝╚██████╔╝    ██║ ╚═╝ ██║╚██████╔╝███████║   ██║        ▌
                ▐        ╚═╝    ╚═════╝  ╚═════╝     ╚═╝     ╚═╝ ╚═════╝ ╚══════╝   ╚═╝        ▌
                ▐                                                                              ▌
                ▐     ██╗      ██████╗  ██████╗  ██████╗ ██╗   ██╗████████╗                    ▌
                ▐     ██║     ██╔═══██╗██╔════╝ ██╔═══██╗██║   ██║╚══██╔══╝                    ▌
                ▐     ██║     ██║   ██║██║  ███╗██║   ██║██║   ██║   ██║                       ▌
                ▐     ██║     ██║   ██║██║   ██║██║   ██║██║   ██║   ██║                       ▌
                ▐     ███████╗╚██████╔╝╚██████╔╝╚██████╔╝╚██████╔╝   ██║                       ▌
                ▐     ╚══════╝ ╚═════╝  ╚═════╝  ╚═════╝  ╚═════╝    ╚═╝                       ▌
                ▐                                                                              ▌
                ▐     ███████╗██╗██████╗ ███████╗████████╗                                     ▌
                ▐     ██╔════╝██║██╔══██╗██╔════╝╚══██╔══╝                                     ▌
                ▐     █████╗  ██║██████╔╝███████╗   ██║                                        ▌
                ▐     ██╔══╝  ██║██╔══██╗╚════██║   ██║                                        ▌
                ▐     ██║     ██║██║  ██║███████║   ██║                                        ▌
                ▐     ╚═╝     ╚═╝╚═╝  ╚═╝╚══════╝   ╚═╝                                        ▌
                ▐                                                                              ▌
                ▐                                                                              ▌
                ▐▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▌");
                return;
            }


        }

        public static void Logout()
        {
            if (!isLoggedIn)
            {
                Console.WriteLine("You are not logged in.");
                return;
            }

            Console.WriteLine($"{currentUser} has logged out.");
            isLoggedIn = false;
           
        }
    }
}

